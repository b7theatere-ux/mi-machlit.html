<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>××™ ××—×œ×™×˜? - ×’×¨×¡×ª ×”×’×‘×™×¢</title>
    <style>
        :root {
            --omer-color: #9c27b0; /* ×¡×’×•×œ */
            --elia-color: #4caf50; /* ×™×¨×•×§ */
            --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            text-align: center;
            background: var(--bg-gradient);
            margin: 0;
            padding: 10px;
            touch-action: manipulation;
        }

        .container {
            max-width: 500px;
            margin: auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        /* ×ª×¤×¨×™×˜ ×‘×—×™×¨×ª × ×•×©× */
        .category-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 15px;
        }

        .cat-btn {
            background: white;
            border: 2px solid #eee;
            padding: 12px 5px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
        }

        .cat-btn.active {
            border-color: #ff9800;
            background: #fff3e0;
        }

        button {
            padding: 12px;
            border-radius: 15px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .main-btn { background: #ff9800; color: white; width: 100%; margin: 5px 0; font-size: 18px; }
        .omer-btn { background: var(--omer-color); color: white; flex: 1; margin: 5px; font-size: 20px; }
        .elia-btn { background: var(--elia-color); color: white; flex: 1; margin: 5px; font-size: 20px; }

        #screen {
            margin: 15px 0;
            padding: 30px 15px;
            background: #fff;
            border-radius: 20px;
            min-height: 100px;
            font-size: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            border: 3px dashed #ddd;
        }

        /* ×’×œ×’×œ */
        #wheel {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            border: 6px solid #333;
            transition: transform 3s cubic-bezier(0.1, 0, 0.2, 1);
            background: conic-gradient(var(--omer-color) 0% 50%, var(--elia-color) 50% 100%);
            display: none;
            margin: 10px auto;
            position: relative;
        }

        #wheel::after {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 20px solid red;
        }

        /* ×¤×•×¤××¤ × ×™×¦×—×•×Ÿ */
        #winner-popup {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.92);
            color: white;
            z-index: 2000;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }

        .trophy-img {
            width: 150px;
            height: 150px;
            margin-bottom: 20px;
        }

        .scoreboard {
            background: #f0f0f0;
            padding: 10px;
            border-radius: 15px;
            margin-top: 15px;
            font-size: 14px;
        }

        .timer { font-size: 50px; color: #ff4081; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="margin-top:0">ğŸ® ××™ ××—×œ×™×˜ ×”×¤×¢×?</h2>

    <div id="category-selector" class="category-grid">
        <button class="cat-btn" onclick="setTask('××ª×§×œ×— ××—×¨×•×Ÿ')">ğŸš¿ ××§×œ×—×ª</button>
        <button class="cat-btn" onclick="setTask('×¨×•××” TV ×¨××©×•×Ÿ')">ğŸ“º ×˜×œ×•×•×™×–×™×”</button>
        <button class="cat-btn" onclick="setTask('××©×—×§ ×‘×¡×•× ×™ ×¨××©×•×Ÿ')">ğŸ® ×¡×•× ×™</button>
        <button class="cat-btn" onclick="setTask('×™×•×©×‘ ×œ×™×“ ×”×—×œ×•×Ÿ')">ğŸªŸ ×—×œ×•×Ÿ</button>
        <button class="cat-btn" onclick="setTask('×¡×ª× ××©×¢×× ×œ× ×•')">ğŸ˜ ×¡×ª× ××©×—×§</button>
        <button class="cat-btn" onclick="setTask(prompt('××” ×”××©×™××”?'))">âœï¸ ××—×¨</button>
    </div>

    <div style="margin-bottom:10px;">
        <span>×”×˜×•×‘ ×:</span>
        <select id="gameMode" onchange="resetSeries()">
            <option value="1">1</option>
            <option value="3">3</option>
            <option value="5">5</option>
        </select>
    </div>

    <button class="main-btn" onclick="startReaction()">âš¡ ××©×—×§ ×ª×’×•×‘×”</button>
    <button class="main-btn" onclick="startWheel()">ğŸ¡ ×’×œ×’×œ ××–×œ</button>
    <button class="main-btn" onclick="startNumberGame()">ğŸ”¢ ××¡×¤×¨ ×¡×•×“×™ (1-10)</button>

    <div id="screen">×‘×—×¨ × ×•×©× ×•××©×—×§!</div>
    <div id="wheel"></div>

    <div id="player-buttons" style="display: none; justify-content: center; width: 100%;">
        <button id="btn-omer" class="omer-btn" onclick="playerAction('omer')">×¢×•××¨</button>
        <button id="btn-elia" class="elia-btn" onclick="playerAction('elia')">××œ×™×”</button>
    </div>

    <div class="scoreboard">
        <strong>×¡×“×¨×”:</strong> <span id="s1">0</span> - <span id="s2">0</span>
        <br>
        <strong>ğŸ† ×¡×”"×› × ×™×¦×—×•× ×•×ª:</strong> <span id="total1">0</span> - <span id="total2">0</span>
        <br>
        <button onclick="resetAllScores()" style="font-size:10px; margin-top:5px; padding:5px;">××™×¤×•×¡ ×”×›×œ</button>
    </div>

    <div style="margin-top:15px; font-size:12px;">
        <button onclick="changeNames()">×©× ×” ×©××•×ª</button>
        <button onclick="exportCode()">×™×™×¦×•× ×§×•×“</button>
    </div>
</div>

<div id="winner-popup">
    <svg class="trophy-img" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="#FFD700" stroke="#FFA500" stroke-width="1"/>
        <path d="M6 9V7C6 4.23858 8.23858 2 11 2H13C15.7614 2 18 4.23858 18 7V9" stroke="#FFD700" stroke-width="2"/>
        <path d="M4 10H20V12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12V10Z" fill="#FFD700"/>
        <rect x="8" y="21" width="8" height="2" fill="#C0C0C0"/>
    </svg>
    <div id="winner-text" style="font-size: 28px; margin-bottom: 20px;"></div>
    <button onclick="closePopup()" style="padding:15px 40px; font-size:20px; background:white; color:black;">×¡×’×•×¨</button>
</div>

<script>
    let state = {
        name1: "×¢×•××¨", name2: "××œ×™×”",
        score1: 0, score2: 0,
        total1: parseInt(localStorage.getItem('total1')) || 0,
        total2: parseInt(localStorage.getItem('total2')) || 0,
        currentTask: "××” ×©×¡×™×›××ª×",
        canPress: false,
        gameActive: false,
        timer: null
    };

    updateUI();

    function setTask(task) {
        if(!task) return;
        state.currentTask = task;
        document.getElementById('screen').innerText = "×¨×‘×™× ×¢×œ: " + task + "\n×¢×›×©×™×• ×ª×‘×—×¨×• ××©×—×§!";
    }

    function updateUI() {
        document.getElementById('btn-omer').innerText = state.name1;
        document.getElementById('btn-elia').innerText = state.name2;
        document.getElementById('s1').innerText = state.score1;
        document.getElementById('s2').innerText = state.score2;
        document.getElementById('total1').innerText = state.total1;
        document.getElementById('total2').innerText = state.total2;
    }

    function startReaction() {
        resetGameView();
        const screen = document.getElementById('screen');
        screen.style.background = "#ffebee";
        screen.innerText = "×—×›×• ×œ×™×¨×•×§...";
        document.getElementById('player-buttons').style.display = 'flex';
        state.gameActive = true;
        state.canPress = false;

        state.timer = setTimeout(() => {
            if(!state.gameActive) return;
            screen.style.background = "#e8f5e9";
            screen.innerText = "×¢×›×©×™×•!!!";
            state.canPress = true;
        }, Math.random() * 3000 + 2000);
    }

    function startWheel() {
        resetGameView();
        const wheel = document.getElementById('wheel');
        wheel.style.display = 'block';
        let rotation = 1800 + Math.random() * 1800;
        wheel.style.transform = `rotate(${rotation}deg)`;
        
        setTimeout(() => {
            const finalAngle = (rotation % 360);
            let winner = (finalAngle > 180) ? 'omer' : 'elia';
            winRound(winner);
        }, 3200);
    }

    function startNumberGame() {
        resetGameView();
        let timeLeft = 10;
        const screen = document.getElementById('screen');
        screen.innerHTML = `×ª×›×¨×™×–×• ×¢×œ ××¡×¤×¨ (1-10)...<br><span class="timer" id="t-clock">10</span>`;
        
        let interval = setInterval(() => {
            timeLeft--;
            if(document.getElementById('t-clock')) document.getElementById('t-clock').innerText = timeLeft;
            if(timeLeft <= 0) {
                clearInterval(interval);
                const secret = Math.floor(Math.random() * 10) + 1;
                screen.innerHTML = `×”××¡×¤×¨ ×©×œ×™ ×”×•×: <div style="font-size:60px">${secret}</div> ××™ ×”×™×” ×”×›×™ ×§×¨×•×‘?`;
                document.getElementById('player-buttons').style.display = 'flex';
                state.canPress = true;
            }
        }, 1000);
    }

    function playerAction(player) {
        if (!state.gameActive && !state.canPress) return;
        if (state.gameActive && !state.canPress) {
            alert("××•×§×“× ××“×™! " + (player === 'omer' ? state.name2 : state.name1) + " ××§×‘×œ × ×§×•×“×”.");
            winRound(player === 'omer' ? 'elia' : 'omer');
            return;
        }
        winRound(player);
    }

    function winRound(player) {
        state.gameActive = false;
        state.canPress = false;
        if(player === 'omer') state.score1++; else state.score2++;
        updateUI();
        
        const target = parseInt(document.getElementById('gameMode').value);
        const winThreshold = Math.ceil(target / 2);

        if (state.score1 >= winThreshold) { 
            state.total1++; showWinner(state.name1); 
        } else if (state.score2 >= winThreshold) { 
            state.total2++; showWinner(state.name2); 
        } else {
            document.getElementById('screen').innerText = "× ×§×•×“×” ×œ" + (player === 'omer' ? state.name1 : state.name2);
        }
        localStorage.setItem('total1', state.total1);
        localStorage.setItem('total2', state.total2);
    }

    function showWinner(name) {
        const popup = document.getElementById('winner-popup');
        document.getElementById('winner-text').innerHTML = `× ×™×¦×—×•×Ÿ ×œ${name}!<br><small>×”×—×œ×˜×”: ${state.currentTask}</small>`;
        popup.style.display = 'flex';
        resetSeries();
    }

    function resetGameView() {
        clearTimeout(state.timer);
        state.gameActive = false;
        state.canPress = false;
        document.getElementById('screen').style.background = "#fff";
        document.getElementById('wheel').style.display = 'none';
        document.getElementById('player-buttons').style.display = 'none';
    }

    function resetSeries() { state.score1 = 0; state.score2 = 0; updateUI(); }
    function resetAllScores() { if(confirm("×œ××¤×¡ ×”×›×œ?")) { localStorage.clear(); location.reload(); } }
    function closePopup() { document.getElementById('winner-popup').style.display = 'none'; resetGameView(); }
    function changeNames() {
        state.name1 = prompt("×©× ×”×™×œ×“ (×¡×’×•×œ):", state.name1) || state.name1;
        state.name2 = prompt("×©× ×”×™×œ×“×” (×™×¨×•×§):", state.name2) || state.name2;
        updateUI();
    }
    function exportCode() {
        const blob = new Blob([document.documentElement.outerHTML], {type: "text/html"});
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "game.html";
        a.click();
    }
</script>
</body>
</html>
